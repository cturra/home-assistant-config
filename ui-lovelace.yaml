anchors:
  # alerts (generic)
  alert-style: &alert-style
    card_mod:
      style: |
        :host {
          color: #e63900;
          --card-mod-icon-color: #e63900;
          --secondary-text-color: #aa3300;
        }

  # alerts (info)
  alert-info-style: &alert-info-style
    card_mod:
      style: |
        :host {
          color: #0189cd;
          --card-mod-icon-color: #0189cd;
          --secondary-text-color: #006ea5;
        }

  # alerts (plants)
  alert-plant-style: &alert-plant-style
    card_mod:
      style: |
        :host {
          color: #00b32d;
          --card-mod-icon-color: #00b32d;
          --secondary-text-color: #008020;
        }

  # entity header formatting (not used for overivew dashboard)
  entities-header-style: &entities-header-style
    card_mod:
      style:
        $: | 
          :host {
            border: none;
          }
          :host .card-header {
            padding: 5px 20px 0px 20px;
            font-size: 1.2em;
            font-weight: bold;
            line-height: 20px;
            display: flex;
            flex-direction: row;
          }
          .card-header:before, .card-header:after {
            content: "";
            flex: 1 1;
            border-bottom: 1px solid #505050;
            margin: auto;
          }
          .card-header:before {
            margin-right: 10px;
          }
          .card-header:after {
            margin-left: 10px;
          }

  entities-overview-header-style: &entities-overview-header-style
    card_mod:
      style: |
        :host .card-header {
          padding: 5px 20px 0px 20px;
          font-size: 1.2em;
          font-weight: bold;
          line-height: 40px;
          display: flex;
          flex-direction: row;
          margin-top: -10px;
        }
        :host .card-header:before, .card-header:after {
          content: "";
          flex: 1 1;
          border-bottom: 1px solid #505050;
          margin: auto;
        }
        :host .card-header:before {
          margin-right: 10px;
        }
        :host .card-header:after {
          margin-left: 10px;
        }

  # entities
  entities-style: &entities-style
    card_mod:
      style: |
        :host .card-content {
          padding: 0px 10px 2px;
        }
        ha-card {
          box-shadow: none;
          border: none;
        }

  # thermostat
  thermostat-style: &thermostat-style
    card_mod:
      style: |
        ha-card {
          border: none;
          --st-font-size-xl: 60px;
          --st-font-size-m: 20px;
          --st-font-size-sensors: 14px;
          --st-spacing: 2px;
        }

  # mini-graph
  mini-graph-style: &mini-graph-style
    card_mod:
      style: |
        ha-card {
          border: none;
        }

  # climate button
  climate-button-style: &climate-button-style
    card_mod:
      style: |
        ha-card {
          box-shadow: none;
          border: none;
          height: 50px;
        }
    styles:
      name:
        - font-size: 11px
      state:
        - font-size: 18px

  # battery state
  battery-state-style: &battery-state-style
    card_mod:
      style: |
        :host .card-header {
          padding: 5px 20px 0px 20px;
          font-size: 1.2em;
          font-weight: bold;
          line-height: 20px;
          display: flex;
          flex-direction: row;
        }
        :host .card-header:before, .card-header:after {
          content: "";
          flex: 1 1;
          border-bottom: 1px solid #505050;
          margin: auto;
        }
        :host .card-header:before {
          margin-right: 10px;
        }
        :host .card-header:after {
          margin-left: 10px;
        }
        :host .card-content {
          padding: 5px 15px 5px 10px;
        }
        :host .entity-spacing {
          margin: 0px 0;
        }
        .icon {
          height: 30px;
        }

  # neutral icon entity
  neutral-icon-entity-style: &neutral-icon-entity-style
    card_mod:
      style: |
        :host {
          --card-mod-icon-dim: none;
          --card-mod-icon-color: var(--secondary-text-color);
        }

  # graph button-card style
  graph-button-card-style: &graph-button-card-style
    card_mod:
      style: |
        ha-card {
          box-shadow: none;
          border: none;
        }
    styles:
      card:
        - height: 60px
      name:
        - margin: 10px
        - font-size: 11px
      state:
        - margin: -10px
        - font-size: 18px

  # graph button-card style
  graph-header-button-card-style: &graph-header-button-card-style
    card_mod:
      style: |
        ha-card {
          box-shadow: none;
          border: none;
        }
    styles:
      card:
        - height: 60px
      name:
        - margin: 10px
        - font-size: 14px
      state:
        - margin: -10px
        - font-size: 24px

  # media player card style
  media-player-card-style: &media-player-card-style
    card_mod:
      style: |
        :host .mmp-player {
          padding: 0px;
        }
        ha-card {
          box-shadow: none;
          border: none;
        }

  # battery state color_gradient
  battery-state-color_gradient: &battery-state-color_gradient
    color_gradient:
      - "#a21c10" # red
      - "#b3b300" # yellow
      - "#24b300" # green

  # mini-graph-card temperature color_thresholds
  temp-graph-color_thresholds: &temp-graph-color_thresholds
    color_thresholds:
      - color: '#a55eea'
        value: -6.9
      - color: '#8854d0'
        value: -3.9
      - color: '#3867d6'
        value: -1.2
      - color: '#4b7bec'
        value: 1.6
      - color: '#2d98da'
        value: 4.3
      - color: '#45aaf2'
        value: 7.1
      - color: '#0fb9b1'
        value: 9.9
      - color: '#2bcbba'
        value: 12.7
      - color: '#20bf6b'
        value: 15.5
      - color: '#26de81'
        value: 18.2
      - color: '#fed330'
        value: 21
      - color: '#f7b731'
        value: 23.8
      - color: '#fd9644'
        value: 26.6
      - color: '#fa8231'
        value: 29.3
      - color: '#fc5c65'
        value: 32.1
      - color: '#eb3b5a'
        value: 35.9


title: Home
custom_header:
  compact_mode: true
views:
  ## ------ OVERVIEW DASHBOARD ------
  - title: Overview
    path: overview
    icon: 'mdi:alert-box-outline'
    badges: []
    cards:
      # devices in state out of normal range
      - type: 'custom:auto-entities'
        show_empty: false
        card:
          type: entities
          title: 'Notifications'
          show_header_toggle: false
          <<: *entities-overview-header-style
        filter:
          exclude:
            - state: 'unavailable'
          include:
            # battery low: zigbee & ble sensors < 15%
            - entity_id: 'sensor.(rmt|snr)_*_battery'
              state: '< 10'
              options:
                secondary_info: last-changed
                icon: 'mdi:battery-alert-variant-outline'
                <<: *alert-style
            # battery low: scale & toothbrushes < 15%
            - entity_id: 'sensor.(scale|toothbrush)_*_battery_persistent'
              state: '< 15'
              options:
                secondary_info: last-changed
                icon: 'mdi:battery-low'
                <<: *alert-style
            # xiaomi mi flora battery may need replacement
            - entity_id: 'sensor.plnt_*_moisture'
              last_updated: '> 720' # 12 hours
              options:
                secondary_info: last-changed
                icon: 'mdi:battery-alert-variant-outline'
                <<: *alert-style
            # battery low: sonos roam
            - entity_id: 'sensor.media_*_battery_state'
              state: '< 20'
              options:
                  secondary_info: last-changed
                  <<: *alert-style
            # battery low: rtl_433
            - entity_id: 'binary_sensor.snr_*_battery_low'
              state: 'on'
              options:
                secondary_info: last-changed
                icon: 'mdi:battery-alert-variant-outline'
                <<: *alert-style
            # battery low: door locks
            - entity_id: 'sensor.lck_*_battery'
              state: '< 10'
              options:
                secondary_info: last-changed
                icon: 'mdi:battery-low'
                <<: *alert-style
            # freezer temperature too warm (> -13.9 °C)
            - entity_id: 'sensor.snr_*_freezer_temperature'
              state: '> -13.9'
              options:
                icon: 'mdi:fridge-alert-outline'
                secondary_info: last-changed
                <<: *alert-style
            # fridge temperature too warm (> 6.9 °C)
            - entity_id: 'sensor.snr_*_fridge_temperature'
              state: '> 6.9'
              options:
                icon: 'mdi:fridge-alert-outline'
                secondary_info: last-changed
                <<: *alert-style
            # outdoor air quality unhealthy
            - entity_id: sensor.snr_outside_airquality_aqi
              # above 100 is considered unhealthy for sensitive groups
              state: '> 100.0'
              options:
                name: 'Outdoor: Air Quality'
                secondary_info: last-changed
                icon: 'mdi:chemical-weapon'
                <<: *alert-style
            # plant needs water
            - entity_id: 'binary_sensor.plant_*_soil_moisture_normal'
              state: 'off'
              options:
                type: attribute
                attribute: moisture
                icon: 'mdi:sprout-outline'
                secondary_info: last-changed
                <<: *alert-plant-style
            # water leak
            - entity_id: 'binary_sensor.snr_*_water_leak'
              state: 'on'
              options:
                icon: 'mdi:water-alert'
                secondary_info: last-changed
                <<: *alert-style
            # weather advisories
            - entity_id: '/sensor.pitt_meadows_(advisories|statements|warnings)/'
              # regex matches any string that doesn't contain a 0 (used for no warning) or is unavaiable
              state: '/^(?!.*(unavailable|0))/'
              options:
                type: attribute
                attribute: alert_1
                name: 'Weather'
                icon: 'mdi:weather-cloudy-alert'
                secondary_info: last-changed
                <<: *alert-style
            # garage heater turned off
            - entity_id: sensor.hvac_garage_mode_state
              state: '/Off/'
              options:
                type: attribute
                attribute: temperature
                name: 'Garage: Heater'
                icon: 'mdi:fire-off'
                secondary_info: last-changed
                <<: *alert-style
            # always on plugs off/unavailable (see: group.plugs_always_on)
            - entity_id: '/switch.(plg|sw)_(crawlspace_deepfreezer|garage_fridge|laundry_washingmachine)/'
              state: '/(off|unknown)/'
              options:
                icon: 'mdi:power-plug-off-outline'
                secondary_info: last-changed
                <<: *alert-style
            # bbq propane tank needs refilling
            - entity_id: 'sensor.snr_shed_bbq_propane_tank_level_percent'
              state: '< 25'
              options:
                name: 'BBQ Tank'
                icon: 'mdi:propane-tank-outline'
                secondary_info: last-changed
                <<: *alert-style
            # bc hydro bridge has not report in 10 minutes
            - entity_id: 'binary_sensor.bc_hydryo_energy_bridge_stale_updates'
              state: 'on'
              options:
                name: 'BC Hydro Bridge Offline'
                icon: 'mdi:transmission-tower-off'
                secondary_info: last-changed
                <<: *alert-style
            # stale entity updates found
            - entity_id: 'binary_sensor.*_stale_updates'
              state: 'on'
              options:
                icon: 'mdi:alert-circle-outline'
                secondary_info: last-changed
                <<: *alert-style
            # updates available for philips hue bulbs through zigbee2mqtt & esphome
            - entity_id: '/update.(blb|rmt|snr|sw)_*/'
              state: 'on'
              options:
                icon: 'mdi:arrow-up-circle-outline'
                secondary_info: last-changed
                <<: *alert-info-style
            # updates available: hacs
            - entity_id: 'sensor.hacs'
              state: '> 0'
              options:
                name: 'Home Assistant Community Store'
                icon: 'mdi:arrow-up-circle-outline'
                secondary_info: last-changed
                <<: *alert-info-style
            # updates available: core & add-ons
            - entity_id: 'update.*_update'
              state: 'on'
              options:
                icon: 'mdi:arrow-up-circle-outline'
                secondary_info: last-changed
                <<: *alert-info-style
            # updates available (tested with: core, zigbee2mqtt & wled)
            - entity_id: '/update.*(!blb)_(firmware|update)|binary_sensor.*_update_available/'
              state: 'on'
              options:
                icon: 'mdi:arrow-up-circle-outline'
                secondary_info: last-changed
                <<: *alert-info-style
            # family room/main bedroom: air purifier filter change
            - entity_id: 'sensor.fan_(family_room|main_bedroom)_airpurifier_filter_life'
              state: '< 2'
              options:
                icon: 'mdi:air-filter'
                secondary_info: last-changed
                <<: *alert-info-style
            # hvac filter change cycle (every ~3 months)
            - entity_id: 'sensor.hvac_filter_change_interval'
              state: '> 90'
              options:
                name: 'HVAC Air Filter Change'
                secondary_info: last-changed
                tap_action:
                  action: call-service
                  service: input_boolean.turn_on
                  service_data:
                    entity_id: input_boolean.hvac_filter_change_reset
                  confirmation:
                    text: 'HVAC air filter changed?'
                <<: *alert-info-style
            # washing machine cleaning cycle (every month)
            - entity_id: 'sensor.laundry_washing_machine_cleaned_interval'
              state: '> 30'
              options:
                name: 'Laundry: Washing machine cleaning'
                secondary_info: last-changed
                tap_action:
                  action: call-service
                  service: input_boolean.turn_on
                  service_data:
                    entity_id: input_boolean.laundry_washing_machine_cleaning_reset
                  confirmation:
                    text: 'Washing Machine cleaned?'
                <<: *alert-info-style
            # dishwasher cleaning cycle (every month)
            - entity_id: 'sensor.kitchen_dishwasher_cleaned_interval'
              state: '> 30'
              options:
                name: 'Kitchen: Dishwasher cleaning'
                secondary_info: last-changed
                tap_action:
                  action: call-service
                  service: input_boolean.turn_on
                  service_data:
                    entity_id: input_boolean.kitchen_dishwasher_cleaning_reset
                  confirmation:
                    text: 'Dishwasher cleaned?'
                <<: *alert-info-style
            # espresso machine cleaning cycle (every month)
            - entity_id: 'sensor.kitchen_espresso_machine_cleaned_interval'
              state: '> 30'
              options:
                name: 'Kitchen: Espresso machine cleaning'
                secondary_info: last-changed
                tap_action:
                  action: call-service
                  service: input_boolean.turn_on
                  service_data:
                    entity_id: input_boolean.kitchen_espresso_machine_cleaning_reset
                  confirmation:
                    text: 'Espresso Machine cleaned?'
                <<: *alert-info-style
            # stove range hood cleaning cycle (every ~3 months)
            - entity_id: 'sensor.kitchen_rangehood_cleaned_interval'
              state: '> 90'
              options:
                name: 'Kitchen: Range Hood cleaning'
                secondary_info: last-changed
                tap_action:
                  action: call-service
                  service: input_boolean.turn_on
                  service_data:
                    entity_id: input_boolean.kitchen_rangehood_cleaning_reset
                  confirmation:
                    text: 'Range Hood cleaned?'
                <<: *alert-info-style
            # crawlspace locker dehumidified drying cycle (every month)
            - entity_id: 'sensor.crawlspace_locker_dehumidifier_last_dried_interval'
              state: '> 30'
              options:
                name: 'Crawlspace: Locker Dehumidifier'
                secondary_info: last-changed
                tap_action:
                  action: call-service
                  service: input_boolean.turn_on
                  service_data:
                    entity_id: input_boolean.crawlspace_locker_dehumidifier_reset
                  confirmation:
                    text: 'Locker Dehumidifier Dried?'
                <<: *alert-info-style
        sort:
          method: name

      # hvac entities active
      - type: 'custom:auto-entities'
        show_empty: false
        card:
          type: entities
          title: 'HVAC'
          show_header_toggle: false
          <<: *entities-overview-header-style
        filter:
          exclude:
            - state: 'unavailable'
          include:
            # bathroom (down) fan
            - entity_id: 'switch.sw_downstairsbathroom_fan'
              state: 'on'
              options:
                name: 'Bathroom, Down: Fan'
                secondary_info: last-changed
            # bathroom (up) fan
            - entity_id: 'switch.sw_upstairsbathroom_fan'
              state: 'on'
              options:
                name: 'Bathroom, Up: Fan'
                secondary_info: last-changed
            # house (ecobee) & garage (sinope)
            - entity_id: '/binary_sensor.hvac_(garage|house)_(cooling|heating)_state/'
              state: 'on'
              options:
                secondary_info: last-changed
            # family room air purifier
            - entity_id: fan.family_room_airpurifier
              state: 'on'
              options:
                type: 'custom:slider-entity-row'
                name: 'Family Room: Air Purifier'
                icon: 'mdi:air-purifier'
                secondary_info: last-changed
            # kids radiator
            - entity_id: 'binary_sensor.kids_bedroom_heating_state'
              state: 'on'
              options:
                secondary_info: last-changed
            # main bedroom fan
            - entity_id: fan.main_bedroom
              state: 'on'
              options:
                type: 'custom:slider-entity-row'
                name: 'Main Bedroom: Fan'
                icon: 'mdi:fan'
                secondary_info: last-changed
            # main bedroom air purifier
            - entity_id: switch.sw_main_bedroom_airpurifier
              state: 'on'
              options:
                name: 'Main Bedroom: Air Purifier'
                icon: 'mdi:air-purifier'
                secondary_info: last-changed
            # main bedroom heater
            - entity_id: binary_sensor.main_bedroom_heating_state
              state: 'on'
              options:
                name: 'Main Bedroom: Heater'
                icon: 'mdi:radiator'
                secondary_info: last-changed
                tap_action:
                  action: call-service
                  service: switch.turn_off
                  service_data:
                    entity_id: switch.sw_main_bedroom_heater
            # spare bedroom heater
            - entity_id: binary_sensor.spare_bedroom_heating_state
              state: 'on'
              options:
                name: 'Spare Bedroom: Heater'
                icon: 'mdi:radiator'
                secondary_info: last-changed
            # office air purifier
            - entity_id: switch.plg_office_airpurifier
              state: 'on'
              options:
                name: 'Office: Air Purifier'
                icon: 'mdi:air-purifier'
                secondary_info: last-changed
            # garage & laundry dehumidifiers
            - entity_id: '/switch.plg_(garage_dehumidifier|laundry_zbrtr)/'
              state: 'on'
              options:
                secondary_info: last-changed
            # shed ventilation
            - entity_id: switch.sw_shed_fan
              state: 'on'
              options:
                name: 'Shed: Fan'
                icon: 'mdi:fan'
                secondary_info: last-changed
        sort:
          method: name

      # devices that are active
      - type: 'custom:auto-entities'
        show_empty: false
        card:
          type: entities
          title: 'Devices'
          show_header_toggle: false
          <<: *entities-overview-header-style
        filter:
          exclude:
            - state: 'unavailable'
          include:
            # bathroom (down)
            - entity_id: switch.sw_downstairsbathroom_ceilinglight
              state: 'on'
              options:
                name: 'Bathroom, Down: Vanity'
                icon: 'mdi:wall-sconce-flat-variant-outline'
                secondary_info: last-changed
            # bathroom (up)
            - entity_id: switch.sw_upstairsbathroom_light
              state: 'on'
              options:
                name: 'Bathroom, Up: Vanity'
                secondary_info: last-changed
            # crawlspace
            - entity_id: switch.sw_crawlspace_entrancelight
              state: 'on'
              options:
                name: 'Crawlspace: Entrance'
                icon: 'mdi:lightbulb-outline'
                secondary_info: last-changed
            - entity_id: light.blb_crawlspace_lab
              state: 'on'
              options:
                name: 'Crawlspace: Lab'
                icon: 'mdi:lightbulb-outline'
                secondary_info: last-changed
                <<: *neutral-icon-entity-style
            # deck
            - entity_id: light.blb_outside_deck
              state: 'on'
              options:
                type: 'custom:slider-entity-row'
                hide_state: true
                name: 'Deck: Wall'
                icon: 'mdi:wall-sconce-flat-outline'
                secondary_info: last-changed
                <<: *neutral-icon-entity-style
            - entity_id: light.sw_deck_ceilinglight
              state: 'on'
              options:
                  type: 'custom:slider-entity-row'
                  hide_state: true
                  name: 'Deck: Ceiling'
                  icon: 'mdi:light-recessed'
                  secondary_info: last-changed
                  <<: *neutral-icon-entity-style
            # driveway
            - entity_id: light.group_driveway_lights
              state: 'on'
              options:
                name: 'Driveway'
                icon: 'mdi:coach-lamp'
                secondary_info: last-changed
                <<: *neutral-icon-entity-style
            # family room
            - entity_id: switch.sw_familyroom_ceilinglight
              state: 'on'
              options:
                name: 'Family Room: Ceiling'
                icon: 'mdi:ceiling-light-outline'
                secondary_info: last-changed
            - entity_id: switch.plg_familyroom_cabinetlight
              state: 'on'
              options:
                name: 'Family Room: Cabinet'
                icon: 'mdi:light-recessed'
                secondary_info: last-changed
            - entity_id: light.blb_familyroom_garland
              state: 'on'
              options:
                name: 'Family Room: Garland'
                icon: 'mdi:string-lights'
                secondary_info: last-changed
                <<: *neutral-icon-entity-style
            - entity_id: switch.sw_familyroom_christmastree
              state: 'on'
              options:
                name: 'Family Room: Christmas Tree'
                icon: 'mdi:pine-tree-variant-outline'
                secondary_info: last-changed
                <<: *neutral-icon-entity-style
            - entity_id: switch.sw_familyroom_cornerlight
              state: 'on'
              options:
                name: 'Family Room: Corner'
                icon: 'mdi:light-recessed'
                secondary_info: last-changed
            - entity_id: light.sw_familyroom_walllights
              state: 'on'
              options:
                type: 'custom:slider-entity-row'
                hide_state: true
                name: 'Family Room: Wall Sconce'
                icon: 'mdi:wall-sconce-flat-variant-outline'
                secondary_info: last-changed
                <<: *neutral-icon-entity-style
            # garage
            - entity_id: switch.sw_garage_ceilingmainlights
              state: 'on'
              options:
                name: 'Garage: Ceiling, Main'
                icon: 'mdi:ceiling-light-multiple-outline'
                secondary_info: last-changed
            - entity_id: switch.sw_garage_plant_relay_1
              state: 'on'
              options:
                name: 'Garage: Plant Light'
                icon: 'mdi:ceiling-light-outline'
                secondary_info: last-changed
            - entity_id: binary_sensor.garage_treadmill_state
              state: 'on'
              options:
                name: 'Garage: Treadmill'
                secondary_info: last-changed
            - entity_id: switch.sw_outside_garagesidedoorlight
              state: 'on'
              options:
                name: 'Garage: Side Door'
                icon: 'mdi:coach-lamp'
                secondary_info: last-changed
            # kitchen
            - entity_id: light.kitchen_ceiling
              state: 'on'
              options:
                name: 'Kitchen: Ceiling'
                icon: 'mdi:light-recessed'
                <<: *neutral-icon-entity-style
                secondary_info: last-changed
            - entity_id: switch.sw_kitchen_sinklight
              state: 'on'
              options:
                name: 'Kitchen: Sink'
                icon: 'mdi:light-recessed'
                secondary_info: last-changed
            - entity_id: light.sw_diningroom_ceilinglight
              state: 'on'
              options:
                type: 'custom:slider-entity-row'
                hide_state: true
                name: 'Kitchen: Table'
                icon: 'mdi:ceiling-light-outline'
                secondary_info: last-changed
                <<: *neutral-icon-entity-style
            - entity_id: switch.plg_kitchen_espressomachine
              state: 'on'
              options:
                name: 'Espresso Machine'
                icon: 'mdi:coffee-maker-outline'
                secondary_info: last-changed
            - entity_id: switch.plg_kitchen_outlet1
              state: 'on'
              options:
                name: 'Kitchen: Kids Room Monitor'
                icon: 'mdi:speaker-wireless'
                secondary_info: last-changed
            # living room
            - entity_id: light.sw_livingroom_ceilinglight
              state: 'on'
              options:
                type: 'custom:slider-entity-row'
                hide_state: true
                name: 'Living Room: Ceiling'
                icon: 'mdi:track-light'
                secondary_info: last-changed
                <<: *neutral-icon-entity-style
            # office
            - entity_id: switch.sw_office_ceilinglight
              state: 'on'
              options:
                name: "Office: Ceiling"
                icon: 'mdi:track-light'
                secondary_info: last-changed
            - entity_id: switch.sw_office_monitorlightbar
              state: 'on'
              options:
                name: 'Office: Monitor Light'
                icon: 'mdi:television-ambient-light'
                secondary_info: last-changed
            # main bedroom
            - entity_id: light.sw_mainbedroom_ceilinglight
              state: 'on'
              options:
                type: 'custom:slider-entity-row'
                hide_state: true
                name: 'Main Bedroom'
                icon: 'mdi:dome-light'
                secondary_info: last-changed
                <<: *neutral-icon-entity-style
            - entity_id: light.blb_main_bedroom_floor_lamp
              state: 'on'
              options:
                type: 'custom:slider-entity-row'
                hide_state: true
                name: 'Main Bedroom: Lamp'
                secondary_info: last-changed
            # kids bedroom
            - entity_id: light.sw_kidsbedroom_ceilinglight
              state: 'on'
              options:
                type: 'custom:slider-entity-row'
                hide_state: true
                name: 'Kids Bedroom: Ceiling'
                icon: 'mdi:dome-light'
                secondary_info: last-changed
                <<: *neutral-icon-entity-style
            - entity_id: light.blb_kidsbedroom_lamp
              state: 'on'
              options:
                type: 'custom:slider-entity-row'
                hide_state: true
                name: 'Kids Bedroom: Lamp'
                icon: 'mdi:lamp-outline'
                secondary_info: last-changed
            # laundry
            - entity_id: binary_sensor.laundry_washing_machine_state
              state: 'on'
              options:
                name: 'Laundry: Washing Machine'
                icon: 'mdi:washing-machine'
                secondary_info: last-changed
            # porch
            - entity_id: light.group_porch_lights
              state: 'on'
              options:
                name: 'Porch'
                icon: 'mdi:light-recessed'
                secondary_info: last-changed
                <<: *neutral-icon-entity-style
            - entity_id: switch.rcl_outside_porchsoffit
              state: 'on'
              options:
                name: 'Holiday Lights'
                icon: 'mdi:string-lights'
                secondary_info: last-changed
            # shed
            - entity_id: switch.sw_shed_floodlight
              state: 'on'
              options:
                name: 'Shed: Flood'
                icon: 'mdi:light-flood-down'
                secondary_info: last-changed
            - entity_id: switch.plg_shed_utility
              state: 'on'
              options:
                name: 'Shed: Grow Light'
                icon: 'mdi:ceiling-light-outline'
                secondary_info: last-changed
            # stairwell
            - entity_id: light.stairwell_ceiling
              state: 'on'
              options:
                name: 'Stairwell'
                icon: 'mdi:chandelier'
                secondary_info: last-changed
                <<: *neutral-icon-entity-style

      # entertainment devices active
      - type: 'custom:auto-entities'
        show_empty: false
        card:
          type: entities
          title: 'Entertainment'
          show_header_toggle: false
          <<: *entities-overview-header-style
        filter:
          exclude:
            - state: 'unavailable'
          include:
            # tv :: garage
            - entity_id: switch.sw_garage_entertainment
              state: 'on'
              options:
                name: 'Garage: TV'
                icon: 'mdi:television'
                secondary_info: last-changed
            # tv :: living room
            - entity_id: switch.living_room_entertainment_htpc
              state: 'on'
              options:
                name: 'Living Room: TV'
                icon: 'mdi:television'
                secondary_info: last-changed
            - entity_id: switch.living_room_entertainment_nintendo
              state: 'on'
              options:
                name: 'Living Room: Nintendo'
                icon: 'mdi:television'
                secondary_info: last-changed
            # speakers :: paused
            - entity_id: 'media_player.*_speaker'
              last_changed: < 2 # minutes
              state: 'paused'
              attributes:
                media_artist: "*"
              options:
                type: 'custom:mini-media-player'
                hide:
                  next: true
                  prev: true
                  power: true
                  progress: true
                  source: true
                  volume: true
                <<: *media-player-card-style
            # speakers :: playing
            - entity_id: 'media_player.*_speaker'
              state: playing
              attributes:
                media_artist: "*"
              options:
                type: 'custom:mini-media-player'
                hide:
                  prev: true
                  power: true
                  progress: true
                  source: true
                <<: *media-player-card-style
            # tv :: main bedroom
            - entity_id: switch.sw_main_bedroom_entertainment
              state: 'on'
              options:
                name: 'Main Bedroom: TV'
                icon: 'mdi:television'
                secondary_info: last-changed
        sort:
          method: name

      # doors and windows active
      - type: 'custom:auto-entities'
        show_empty: false
        card:
          type: entities
          title: 'Doors & Windows'
          <<: *entities-overview-header-style
        filter:
          exclude:
            - state: 'unavailable'
          include:
            # door: locks (ble)
            - entity_id: 'lock.lck_garage_house_door'
              state: 'unlocked'
              options:
                icon: 'mdi:lock-open-outline'
                secondary_info: last-changed
                tap_action:
                  action: call-service
                  service: input_boolean.turn_on
                  service_data:
                    entity_id: input_boolean.garage_house_door_lock_toggled
                  confirmation:
                    text: 'Are you sure you want to lock the Garage House Door?'
            - entity_id: 'lock.lck_house_front_door'
              state: 'unlocked'
              options:
                icon: 'mdi:lock-open-outline'
                secondary_info: last-changed
                tap_action:
                  action: call-service
                  service: input_boolean.turn_on
                  service_data:
                    entity_id: input_boolean.house_front_door_lock_toggled
                  confirmation:
                    text: 'Are you sure you want to lock the Front Door?'
            # doors: zigbee (aqara)
            - entity_id: 'binary_sensor.snr_*door*_contact'
              state: 'on'
              options:
                secondary_info: last-changed
            # doors: tasmota
            - entity_id: binary_sensor.garage_vehicle_door_contact_state
              state: 'on'
              options:
                icon: 'mdi:garage-open-variant'
                secondary_info: last-changed
                tap_action:
                  action: call-service
                  service: cover.toggle
                  service_data:
                    entity_id: cover.garage_vehicledoor
                  confirmation:
                    text: 'Are you sure you want to toggle the Garage Door?'
            # windows: zigbee (aqara)
            - entity_id: 'binary_sensor.snr_*window*_contact'
              state: 'on'
              options:
                secondary_info: last-changed
        sort:
          method: name


  ## ------ SWITCH DASHBAORD ------
  - title: Home
    panel: false
    path: default_view
    icon: 'mdi:home-outline'
    badges: []
    cards:
      # Bathroom (Downstairs)
      - type: 'custom:stack-in-card'
        title: 'Bathroom Downstairs'
        <<: *entities-header-style
        cards:
        - type: horizontal-stack
          cards:
            - type: entities
              show_header_toggle: false
              <<: *entities-style
              entities:
                # fan
                - entity: switch.sw_downstairsbathroom_fan 
                  name: 'Fan'
                  state_color: true
            - type: entities
              show_header_toggle: false
              <<: *entities-style
              entities:
                # fan
                - entity: switch.sw_downstairsbathroom_ceilinglight
                  name: 'Vanity'
                  state_color: true

      # Bathroom (Upstairs)
      - type: 'custom:stack-in-card'
        title: 'Bathroom Upstairs'
        <<: *entities-header-style
        cards:
        - type: horizontal-stack
          cards:
            - type: entities
              show_header_toggle: false
              <<: *entities-style
              entities:
                # fan
                - entity: switch.sw_upstairsbathroom_fan
                  name: 'Fan'
                  state_color: true
            - type: entities
              show_header_toggle: false
              <<: *entities-style
              entities:
                # fan
                - entity: switch.sw_upstairsbathroom_light
                  name: 'Vanity'
                  state_color: true

      # Family Room
      - type: 'custom:stack-in-card'
        mode: vertical
        title: 'Family Room'
        <<: *entities-header-style
        cards:
        - type: horizontal-stack
          cards:
            - type: entities
              show_header_toggle: false
              <<: *entities-style
              entities:
                # dyson air purifier
                - entity: fan.family_room_airpurifier
                  name: 'Air Purifier'
                  icon: 'mdi:air-purifier'
                  state_color: true
                # christmas garland
                - entity: switch.family_room_garland_light
                  name: Garland
                  icon: 'mdi:string-lights'
                  state_color: true
                # ceiling light
                - entity: switch.sw_familyroom_ceilinglight
                  name: Ceiling
                  icon: 'mdi:ceiling-light-outline'
                  state_color: true
                # wall sconce
                - entity: light.sw_familyroom_walllights
                  name: 'Wall Sconce'
                  icon: 'mdi:wall-sconce-flat-variant-outline'
            - type: entities
              show_header_toggle: false
              <<: *entities-style
              entities:
                # display cabinet
                - entity: switch.plg_familyroom_cabinetlight
                  name: Cabinet
                  icon: 'mdi:light-recessed'
                  state_color: true
                # display corner
                - entity: switch.sw_familyroom_cornerlight
                  name: Corner
                  icon: 'mdi:light-recessed'
                  state_color: true
                # stairwell chandelier
                - entity: light.stairwell_ceiling
                  name: Stairwell
                  icon: 'mdi:chandelier'
                  state_color: true

      # Kitchen
      - type: 'custom:stack-in-card'
        title: 'Kitchen'
        <<: *entities-header-style
        cards:
        - type: horizontal-stack
          cards:
            - type: entities
              show_header_toggle: false
              <<: *entities-style
              entities:
                # baby monitor
                - entity: switch.plg_kitchen_outlet1
                  name: 'Kids Monitor'
                  icon: 'mdi:speaker-wireless'
                  state_color: true
                # espresso machine
                - entity: switch.plg_kitchen_espressomachine
                  name: 'Espresso'
                  icon: 'mdi:coffee-maker-outline'
                  state_color: true
                # sink
                - entity: switch.sw_kitchen_sinklight
                  name: Sink
                  icon: 'mdi:light-recessed'
                  state_color: true
            - type: entities
              show_header_toggle: false
              <<: *entities-style
              entities:
                # ceiling light
                - entity: light.kitchen_ceiling
                  name: 'Ceiling'
                  icon: 'mdi:light-recessed'
                  state_color: true
                # speaker
                - entity: switch.plg_kitchen_speaker
                  name: Speaker
                  icon: 'mdi:speaker'
                  state_color: true
                # dining table
                - entity: light.sw_diningroom_ceilinglight
                  name: 'Table'
                  icon: 'mdi:ceiling-light-outline'

      # Living Room
      - type: 'custom:stack-in-card'
        title: 'Living Room'
        <<: *entities-header-style
        cards:
        - type: horizontal-stack
          cards:
          - type: entities
            <<: *entities-style
            entities:
              # ceiling light
              - entity: light.sw_livingroom_ceilinglight
                name: 'Ceiling'
                icon: 'mdi:track-light'
                state_color: true
          - type: entities
            <<: *entities-style
            entities:
              # entertainment
              - entity: switch.living_room_entertainment
                name: 'TV'
                icon: 'mdi:television'
                state_color: true

      # Office
      - type: 'custom:stack-in-card'
        title: 'Office'
        <<: *entities-header-style
        cards:
        - type: horizontal-stack
          cards:
            - type: entities
              <<: *entities-style
              entities:
              # air purifier
              - entity: switch.plg_office_airpurifier
                name: 'Air Purifier'
                icon: 'mdi:air-purifier'
                state_color: true
              - entity: switch.sw_office_monitorlightbar
                name: 'Monitor Light'
                state_color: true
            - type: entities
              <<: *entities-style
              entities:
              # ceiling light
              - entity: switch.sw_office_ceilinglight
                name: 'Ceiling'
                icon: 'mdi:track-light'
                state_color: true

      # Main Bedroom
      - type: 'custom:stack-in-card'
        title: 'Main Bedroom'
        <<: *entities-header-style
        cards:
        - type: horizontal-stack
          cards:
            - type: entities
              show_header_toggle: false
              <<: *entities-style
              entities:
                # air purifier
                - entity: switch.sw_main_bedroom_airpurifier
                  name: 'Air Purifier'
                  icon: 'mdi:air-purifier'
                  state_color: true
                # floor lamp
                - entity: light.blb_main_bedroom_floor_lamp
                  name: 'Lamp'
                  state_color: true
                # entertainment
                - entity: switch.sw_main_bedroom_entertainment
                  name: 'TV'
                  icon: 'mdi:television'
                  state_color: true

            - type: entities
              show_header_toggle: false
              <<: *entities-style
              entities:
                # ceiling light
                - entity: light.sw_mainbedroom_ceilinglight
                  name: 'Ceiling'
                  icon: 'mdi:dome-light'
                  state_color: true
                # heater
                - entity: switch.sw_main_bedroom_heater
                  name: 'Heater'
                  icon: 'mdi:radiator'
                  state_color: true

      # Kids Bedroom
      - type: 'custom:stack-in-card'
        title: 'Kids Bedroom'
        <<: *entities-header-style
        cards:
        - type: horizontal-stack
          cards:
            - type: entities
              show_header_toggle: false
              <<: *entities-style
              entities:
                # ceiling light
                - entity: light.sw_kidsbedroom_ceilinglight
                  name: 'Ceiling'
                  icon: 'mdi:dome-light'
                  state_color: true
            - type: entities
              show_header_toggle: false
              <<: *entities-style
              entities:
                # lamp light bulb on/off control
                - entity: light.blb_kidsbedroom_lamp
                  name: 'Lamp'
                  icon: 'mdi:lamp-outline'
                  state_color: true

      # Garage
      - type: 'custom:stack-in-card'
        title: 'Garage'
        <<: *entities-header-style
        cards:
        - type: horizontal-stack
          cards:
            # vehicle door opener
            - type: 'custom:button-card'
              entity: cover.garage_vehicledoor
              name: 'Vehicle Door'
              tap_action:
                action: toggle
              confirmation:
                text: '[[[ return `Are you sure you want to toggle the Garage Door?` ]]]'
              state:
                - value: 'open'
                  color: 'var(--paper-item-icon-active-color)'
                - value: 'closed'
                  color: 'var(--paper-item-icon-color)'
              styles:
                card:
                  - font-size: 1.0em
                  - height: 100px
              card_mod:
                style: |
                  ha-card {
                    box-shadow: none;
                    border: none;
                  }
            # switches
            - type: entities
              show_header_toggle: false
              <<: *entities-style
              entities:
                # ceiling light
                - entity: switch.sw_garage_ceilingmainlights
                  name: 'Ceiling'
                  icon: 'mdi:ceiling-light-multiple-outline'
                  state_color: true
                # dehumidifier
                - entity: switch.plg_garage_dehumidifier
                  name: 'Dehumidifier'
                  icon: 'mdi:water-outline'
                  state_color: true
                # tv
                - entity: switch.sw_garage_entertainment
                  name: 'TV'
                  icon: 'mdi:television'
                  state_color: true

      # Crawlspace
      - type: 'custom:stack-in-card'
        title: 'Crawlspace'
        <<: *entities-header-style
        cards:
        - type: horizontal-stack
          cards:
            - type: entities
              show_header_toggle: false
              <<: *entities-style
              entities:
                # entrance light
                - entity: switch.sw_crawlspace_entrancelight
                  name: 'Entrance'
                  icon: 'mdi:lightbulb-outline'
                  state_color: true
                # locker heater (dehumidifier)
                - entity: switch.plg_crawlspace_zbrtr
                  name: 'Locker Dehumidifier'
                  icon: 'mdi:water-outline'
                  state_color: true
            - type: entities
              show_header_toggle: false
              <<: *entities-style
              entities:
                # lab light
                - entity: light.blb_crawlspace_lab
                  name: 'Lab'
                  icon: 'mdi:lightbulb-outline'
                  state_color: true


      # Outdoor (Front)
      - type: 'custom:stack-in-card'
        title: 'Outside'
        <<: *entities-header-style
        cards:
        - type: horizontal-stack
          cards:
            - type: entities
              show_header_toggle: false
              <<: *entities-style
              entities:
                # driveway
                - entity: light.group_driveway_lights
                  name: Driveway
                  icon: 'mdi:coach-lamp'
                  state_color: true
                # soffit
                - entity: switch.rcl_outside_porchsoffit
                  name: Soffit
                  state_colour: true
                # deck
                - entity: light.sw_deck_ceilinglight
                  name: 'Deck: Ceiling'
                  icon: 'mdi:light-recessed'
                  state_color: true
            - type: entities
              show_header_toggle: false
              <<: *entities-style
              entities:
                # porch light
                - entity: light.group_porch_lights
                  name: Porch
                  icon: 'mdi:light-recessed'
                  state_color: true
                # deck
                - entity: light.blb_outside_deck
                  name: 'Deck: Wall'
                  icon: 'mdi:wall-sconce-flat-outline'
                  state_color: true

      # Shed
      - type: 'custom:stack-in-card'
        title: 'Shed'
        <<: *entities-header-style
        cards:
        - type: horizontal-stack
          cards:
            - type: entities
              show_header_toggle: false
              <<: *entities-style
              entities:
                # ventilation fan
                - entity: switch.sw_shed_fan
                  name: Fan
                  icon: 'mdi:fan'
                  state_color: true
                # grow light
                - entity: switch.plg_shed_utility
                  name: 'Grow Light'
                  icon: 'mdi:ceiling-light-outline'
                  state_color: true
            - type: entities
              show_header_toggle: false
              <<: *entities-style
              entities:
                # flood light
                - entity: switch.sw_shed_floodlight
                  name: Flood
                  icon: 'mdi:light-flood-down'
                  state_color: true


  ## ------ CLIMATE DASHBOARD ------
  - title: Climate
    path: climate
    icon: 'mdi:home-thermometer-outline'
    badges: []
    cards:
      # HOUSE INDOOR CLIMATE CARDS
      - type: 'custom:stack-in-card'
        title: 'House'
        <<: *entities-header-style
        cards:
        - type: horizontal-stack
          cards:
          # house avg temperature
          - type: 'custom:button-card'
            entity: sensor.hvac_ecobee_indoor_average_temperature
            name: Temperature
            show_units: false
            show_state: true
            show_icon: false
            <<: *graph-header-button-card-style
          # house avg humidity
          - type: 'custom:button-card'
            entity: sensor.indoor_mean_humidity
            name: Humidity
            show_units: false
            show_state: true
            show_icon: false
            <<: *graph-header-button-card-style
          # house avg air quality: fine particles
          - type: 'custom:button-card'
            entity: sensor.indoor_mean_air_quality_calculation
            name: 'PM 2.5'
            show_units: false
            show_state: true
            show_icon: false
            <<: *graph-header-button-card-style
          # house avg air quality: carbon dioxide
          - type: 'custom:button-card'
            entity: sensor.indoor_mean_co2_rounded
            name: 'CO2'
            show_units: false
            show_state: true
            show_icon: false
            <<: *graph-header-button-card-style

        ## INDOOR TEMPERATURE CARDS
        # row 1
        - type: horizontal-stack
          cards:
          # upstairs hallway
          - type: 'custom:button-card'
            entity: sensor.uptairs_hallway_temperature
            name: > 
              [[[
                var occupied = states['binary_sensor.nest_protect_upstairs_occupancy'].state
                return 'Upstairs Hall' + (occupied == 'on' ? ' ⦿': '');
              ]]]
            show_state: true
            show_icon: false
            <<: *climate-button-style

          # main bedroom
          - type: 'custom:button-card'
            entity: sensor.main_bedroom_mean_temperature_calculation
            name: >
              [[[
                var occupied = states['binary_sensor.main_bedroom_presence_sensor_timeout'].state
                return 'Main Bedroom' + (occupied == 'on' ? ' ⦿': '');
              ]]]
            show_state: true
            show_icon: false
            <<: *climate-button-style

          # kids room
          - type: 'custom:button-card'
            entity: sensor.kids_bedroom_mean_temperature_calculation
            name: 'Kids Bedroom'
            show_state: true
            show_icon: false
            <<: *climate-button-style

          # spare bedroom
          - type: 'custom:button-card'
            entity: sensor.snr_sparebedroom_climatedisplay_temperature
            name: 'Spare Bedroom'
            show_state: true
            show_icon: false
            <<: *climate-button-style

        # TEMPERATURE BUTTONS
        # row 2
        - type: horizontal-stack
          cards:
          # kitchen
          - type: 'custom:button-card'
            entity: sensor.kitchen_mean_temperature_calculation
            name: > 
              [[[
                var occupied = states['binary_sensor.dining_room_occupancy'].state
                return 'Kitchen' + (occupied == 'on' ? ' ⦿': '');
              ]]]
            show_state: true
            show_icon: false
            <<: *climate-button-style

          # family room
          - type: 'custom:button-card'
            entity: sensor.snr_familyroom_climatedisplay_temperature
            name: >
              [[[
                var occupied = states['binary_sensor.snr_familyroom_motion_occupancy'].state
                return 'Family Room' + (occupied == 'on' ? ' ⦿': '');
              ]]]
            show_state: true
            show_icon: false
            <<: *climate-button-style

          # office
          - type: 'custom:button-card'
            entity: sensor.snr_office_airquality_temperature
            name: >
              [[[
                var occupied = states['binary_sensor.office_presence_sensor_timeout'].state
                return 'Office' + (occupied == 'on' ? ' ⦿': '');
              ]]]
            show_state: true
            show_icon: false
            <<: *climate-button-style

          # crawlspace
          - type: 'custom:button-card'
            entity: sensor.snr_crawlspace_climatedisplay_temperature
            name: Crawlspace
            show_state: true
            show_icon: false
            <<: *climate-button-style

        # INDOOR TEMPERATURE GRAPHS
        - type: 'custom:mini-graph-card'
          show:
            extrema: false
            fill: fade
            icon: false
            labels: hover
            labels_secondary: hover
            name: false
            state: false
          height: 100
          line_width: 1
          hours_to_show: 24
          points_per_hour: 3
          group: true
          lower_bound_secondary: 30
          upper_bound_secondary: 70
          font_size: 85
          <<: *mini-graph-style
          entities:
            # indoor average temperature
            - entity: sensor.hvac_ecobee_indoor_average_temperature
              show_fill: false
              show_points: false
              show_legend: false
              color: '#5b4461'              
            # temerature in downstairs family room
            - entity: sensor.family_room_temperature
              name: Downstairs
              show_fill: false
              show_points: false
              color: '#eb3b5a'
            # temerature at upstairs hallway ecobee remote sensor
            - entity: sensor.uptairs_hallway_temperature
              name: Upstairs
              show_fill: false
              show_points: false
              color: '#e6b800'
            # temerature at crawlspace aqara sensor
            - entity: sensor.snr_crawlspace_climatedisplay_temperature
              name: Crawlspace
              show_fill: false
              show_points: false
              color: '#21b064'
            # humidity (mean from all climate sensors)
            - entity: sensor.indoor_mean_humidity
              name: Humidity
              show_fill: false
              state_adaptive_color: true
              color: '#5f9bea'
              show_points: false
              y_axis: secondary

        # INDOOR HVAC FUNCTION GRAPHS
        - type: 'custom:mini-graph-card'
          show:
            extrema: false
            fill: fade
            icon: false
            labels: hover
            labels_secondary: hover
            name: false
            state: false
          height: 20
          line_width: 1
          hours_to_show: 24
          points_per_hour: 60
          group: true
          <<: *mini-graph-style
          entities:
            # cooling on/off
            - entity: binary_sensor.hvac_house_cooling_state
              name: Cooling
              color: '#71b7f4'
              show_legend: false
              show_line: false
              show_points: false
            # heating on/off
            - entity: binary_sensor.hvac_house_heating_state
              name: Heating
              color: '#ffad33'
              show_legend: false
              show_line: false
              show_points: false
            # hvac fan on/off
            - entity: binary_sensor.hvac_house_fan_state
              name: Fan
              color: '#ffffff'
              show_legend: true
              show_line: false
              show_points: false
          state_map:
            - value: 'off'
            - value: 'on'

      ## GARAGE CLIMATE CARDS
      - type: 'custom:stack-in-card'
        title: 'Garage'
        <<: *entities-header-style
        cards:
        - type: horizontal-stack
          cards:
          # garage temperature
          - type: 'custom:button-card'
            entity: sensor.garage_mean_temperature_calculation
            name: Temperature
            show_state: true
            show_icon: false
            <<: *graph-button-card-style
          # garage humidity
          - type: 'custom:button-card'
            entity: sensor.garage_climate_humidity_rounded
            name: Humidity
            show_state: true
            show_icon: false
            <<: *graph-button-card-style
          # garage door
          - type: 'custom:button-card'
            entity: cover.garage_vehicledoor
            name: Door
            show_state: true
            state_display: |
              [[[
                if (entity.state == 'open') return 'Open';
                else return 'Closed';
              ]]]
            show_icon: false
            <<: *graph-button-card-style

        # GARAGE TEMPERATURE GRAPHS
        - type: 'custom:mini-graph-card'
          show:
            extrema: false
            icon: false
            labels: hover
            labels_secondary: hover
            name: false
            state: false
          height: 60
          line_width: 1
          hours_to_show: 24
          points_per_hour: 4
          lower_bound_secondary: 30
          upper_bound_secondary: 75
          group: true
          <<: *mini-graph-style
          <<: *temp-graph-color_thresholds
          entities:
            # temerature
            - entity: sensor.garage_mean_temperature_calculation
              name: "Temperature"
              show_fill: false
              show_legend: false
              state_adaptive_color: true
            # humidity
            - entity: sensor.garage_climate_humidity_rounded
              name: Humidity
              line_width: 1
              show_legend: false
              show_fill: false
              state_adaptive_color: true
              color: '#5f9bea'
              y_axis: secondary

        # GARAGE FUNCTION GRAPHS
        - type: 'custom:mini-graph-card'
          show:
            extrema: false
            fill: fade
            icon: false
            labels: hover
            labels_secondary: hover
            name: false
            state: false
          height: 20
          line_width: 1
          hours_to_show: 24
          points_per_hour: 60
          group: true
          <<: *mini-graph-style
          entities:
            # garage car door opened/closed
            - entity: binary_sensor.garage_vehicle_door_contact_state
              name: 'Vehicle Door'
              color: '#ffffff'
              show_legend: true
              show_line: false
              show_points: false
            # garage heater on/off
            - entity: binary_sensor.hvac_garage_heating_state
              name: Heating
              color: '#ffad33'
              show_legend: false
              show_line: false
              show_points: false
            # garage dehumidifier on/off
            - entity: binary_sensor.garage_dehumidifier_state
              name: 'Dehumidifier'
              color: '#71b7f4'
              show_legend: false
              show_line: false
              show_points: false
          state_map:
            - value: 'off'
            - value: 'on'

      ## SHED CLIMATE CARDS
      - type: 'custom:stack-in-card'
        title: 'Sheds'
        <<: *entities-header-style
        cards:
        - type: horizontal-stack
          cards:
          # shed temperature
          - type: 'custom:button-card'
            entity: sensor.snr_shed_temperature
            name: Temperature
            show_state: true
            show_icon: false
            <<: *graph-button-card-style
          # shed humidity
          - type: 'custom:button-card'
            entity: sensor.snr_shed_humidity
            name: Humidity
            show_state: true
            show_icon: false
            <<: *graph-button-card-style
          # propane tank
          - type: 'custom:button-card'
            entity: sensor.snr_shed_bbq_propane_tank_level_percent
            name: 'BBQ Tank'
            show_state: true
            show_icon: false
            <<: *graph-button-card-style
          # shed door
          - type: 'custom:button-card'
            entity: binary_sensor.snr_shed_doorcontact_contact
            name: Door
            show_state: true
            state_display: |
              [[[
                if (entity.state == 'on') return 'Open';
                else return 'Closed'
              ]]]
            show_icon: false
            <<: *graph-button-card-style

        # SHED TEMPERATURE GRAPH CARD
        # tool shed
        - type: 'custom:mini-graph-card'
          show:
            extrema: false
            icon: false
            labels: hover
            labels_secondary: hover
            name: false
            state: false
          height: 60
          line_width: 1
          hours_to_show: 24
          points_per_hour: 4
          lower_bound_secondary: 25
          upper_bound_secondary: 90
          group: true
          <<: *mini-graph-style
          <<: *temp-graph-color_thresholds
          entities:
            # temerature
            - entity: sensor.snr_shed_temperature
              name: Temperature
              show_fill: false
              show_legend: false
              state_adaptive_color: true
            # humidity
            - entity: sensor.snr_shed_humidity
              name: Humidity
              line_width: 1
              show_legend: false
              show_fill: false
              state_adaptive_color: true
              color: '#5f9bea'
              y_axis: secondary
        # toy shed
        - type: horizontal-stack
          cards:
          # toy shed temperature
          - type: 'custom:button-card'
            entity: sensor.snr_toy_shed_temperature
            name: Temperature
            show_state: true
            show_icon: false
            <<: *graph-button-card-style
          # toy shed humidity
          - type: 'custom:button-card'
            entity: sensor.snr_toy_shed_humidity
            name: Humidity
            show_state: true
            show_icon: false
            <<: *graph-button-card-style
          # blank
          - type: 'custom:button-card'
            <<: *entities-style
            color_type: blank
          # toy shed door
          - type: 'custom:button-card'
            entity: binary_sensor.snr_toyshed_doorcontact_contact
            name: Door
            show_state: true
            state_display: |
              [[[
                if (entity.state == 'on') return 'Open';
                else return 'Closed'
              ]]]
            show_icon: false
            <<: *graph-button-card-style

        # TOY SHED TEMPERATURE GRAPH CARD
        - type: 'custom:mini-graph-card'
          show:
            extrema: false
            icon: false
            labels: hover
            labels_secondary: hover
            name: false
            state: false
          height: 60
          line_width: 1
          hours_to_show: 24
          points_per_hour: 4
          lower_bound_secondary: 25
          upper_bound_secondary: 95
          group: true
          <<: *mini-graph-style
          <<: *temp-graph-color_thresholds
          entities:
            # temerature
            - entity: sensor.snr_toy_shed_temperature
              name: Temperature
              show_fill: false
              show_legend: false
              state_adaptive_color: true
            # humidity
            - entity: sensor.snr_toy_shed_humidity
              name: Humidity
              line_width: 1
              show_legend: false
              show_fill: false
              state_adaptive_color: true
              color: '#5f9bea'
              y_axis: secondary


      ## OUTDSIDE CLIMATE CARDS
      - type: 'custom:stack-in-card'
        title: 'Outside'
        <<: *entities-header-style
        cards:
        # WEATHER
        - type: 'custom:simple-weather-card'
          entity: weather.pitt_meadows
          name: " "
          custom:
            - humidity: sensor.snr_outside_humidity
            - temp: sensor.snr_outside_temperature
          primary_info:
            - humidity
            - pressure
          secondary_info:
            - precipitation_probability
            - wind_speed
          card_mod:
            style: |
              .weather__info__title {
                font-size: 20px;
              }
              ha-card.type-custom-simple-weather-card {
                padding: 10px 10px 5px 5px;
              }
              :host ha-card {
                border: none;
              }

        # AIR QUALITY (FROM PURPLEAIR DEVICE)
        - type: horizontal-stack
          cards:
          # AQI
          - type: 'custom:button-card'
            entity: sensor.snr_outside_airquality_aqi
            name: 'AQI'
            show_state: true
            show_icon: false
            <<: *graph-button-card-style
          # pm 2.5
          - type: 'custom:button-card'
            entity: sensor.snr_outside_mean_airquality_pm_2_5
            name: 'PM 2.5'
            show_state: true
            show_icon: false
            <<: *graph-button-card-style
          - type: 'custom:button-card'
            <<: *entities-style
            color_type: blank
        - type: 'custom:mini-graph-card'
          entities:
            - sensor.snr_outside_airquality_aqi
          unit: AQI
          name: AQI
          hour24: true
          show:
              extrema: false
              fill: fade
              icon: false
              labels: hover
              labels_secondary: hover
              name: false
              state: false
          height: 60
          line_width: 1
          points_per_hour: 6
          hours_to_show: 24
          color_thresholds_transition: hard
          <<: *mini-graph-style
          color_thresholds:
              - value: 0
                color: '#24b300'
              - value: 50
                color: '#b3b300'
              - value: 100
                color: '#a54f0d'
              - value: 150
                color: '#a21c10'
              - value: 200
                color: '#8c1a4b'
              - value: 250
                color: '#731425'


## ------ VEHICLE DASHBOARD ------
  - title: Truck
    path: truck
    icon: 'mdi:car-info'
    badges: []
    cards:
      - type: 'custom:stack-in-card'
        title: 'Tacoma'
        <<: *entities-header-style
        cards:
        # tacoma presence
        - type: 'custom:button-card'
          entity: binary_sensor.snr_tacoma_location
          show_name: false
          show_state: true
          state_display: |
            [[[
              if (entity.state == 'on') return 'Home';
              else return 'Away';
            ]]]
          show_icon: false
          <<: *graph-button-card-style

        # cab climate
        - type: horizontal-stack
          cards:
          # cab temperature
          - type: 'custom:button-card'
            entity: sensor.tacoma_cab_temperature_1_decimal
            name: 'Cab Temperature'
            show_state: true
            show_icon: false
            <<: *graph-button-card-style
          # cab humidity
          - type: 'custom:button-card'
            entity: sensor.tacoma_cab_humidity_rounded
            name: 'Cab Humidity'
            show_state: true
            show_icon: false
            <<: *graph-button-card-style
          # box humidity
          - type: 'custom:button-card'
            entity: sensor.tacoma_box_humidity_rounded
            name: 'Box Humidity'
            show_state: true
            show_icon: false
            <<: *graph-button-card-style

        # TRUCK TEMPERATURE GRAPH CARD
        - type: 'custom:mini-graph-card'
          show:
            extrema: false
            icon: false
            labels: hover
            labels_secondary: hover
            name: false
            state: false
          height: 60
          line_width: 1
          hours_to_show: 24
          points_per_hour: 6
          lower_bound_secondary: 10
          upper_bound_secondary: 99
          group: true
          <<: *mini-graph-style
          <<: *temp-graph-color_thresholds
          entities:
            # temerature
            - entity: sensor.snr_outside_tacomacabclimate_temperature
              name: 'Cab Temperature'
              show_fill: false
              show_legend: false
              state_adaptive_color: true
            # cab humidity
            - entity: sensor.snr_outside_tacomacabclimate_humidity
              name: 'Cab Humidity'
              line_width: 1
              show_legend: false
              show_fill: false
              state_adaptive_color: true
              color: '#5f9bea'
              y_axis: secondary
            # box humidity
            - entity: sensor.snr_outside_tacomaboxclimate_humidity
              name: 'Box Humidity'
              line_width: 1
              show_legend: false
              show_fill: false
              state_adaptive_color: true
              color: '#5f9bea'
              y_axis: secondary

        # TACOMA PRESENCE GRAPH
        - type: 'custom:mini-graph-card'
          show:
            extrema: false
            fill: fade
            icon: false
            labels: hover
            labels_secondary: hover
            name: false
            state: false
          height: 20
          line_width: 1
          hours_to_show: 24
          points_per_hour: 60
          group: true
          <<: *mini-graph-style
          entities:
            # tacoma is home/away
            - entity: binary_sensor.snr_tacoma_location
              name: 'Tacoma Location'
              color: '#afafaf'
              show_legend: true
              show_line: false
              show_points: false
          state_map:
            - value: 'on'
              label: away
            - value: 'off'
              label: "home"


  ## ------ BATTERY DASHBOARD ------
  - title: Battery
    path: battery
    icon: 'mdi:battery-outline'
    badges: []
    cards:
      # Air Quality Sensors
      - type: 'custom:battery-state-card'
        title: 'Air Quality Sensors'
        <<: *battery-state-color_gradient
        <<: *battery-state-style
        tap_action: more-info
        sort:
          - "state"
          - "name"
        filter:
          include:
            - name: entity_id
              value: 'sensor.snr_*airquality_battery'

      # Climate Sensors
      - type: 'custom:battery-state-card'
        title: 'Climate Sensors'
        <<: *battery-state-color_gradient
        <<: *battery-state-style
        tap_action: more-info
        sort:
          - "state"
          - "name"
        filter:
          include:
            - name: entity_id
              value: 'sensor.snr_*climate*_battery'

      # Contact Sensors
      - type: 'custom:battery-state-card'
        title: 'Contact Sensors'
        <<: *battery-state-color_gradient
        <<: *battery-state-style
        tap_action: more-info
        sort:
          - "state"
          - "name"
        filter:
          include:
            - name: entity_id
              value: 'sensor.snr_*contact_battery'

      # Leak Sensors
      - type: 'custom:battery-state-card'
        title: 'Leak Sensors'
        <<: *battery-state-color_gradient
        <<: *battery-state-style
        tap_action: more-info
        sort:
          - "state"
          - "name" 
        filter:
          include:
            - name: entity_id
              value: 'sensor.snr_*leak_battery'

      # Lock
      - type: 'custom:battery-state-card'
        title: 'Locks'
        <<: *battery-state-color_gradient
        <<: *battery-state-style
        tap_action: more-info
        sort:
          - "state"
          - "name"
        filter:
          include:
            - name: entity_id
              value: 'sensor.lck_*_battery'

      # Media Players
      - type: 'custom:battery-state-card'
        title: 'Media Players'
        <<: *battery-state-color_gradient
        <<: *battery-state-style
        tap_action: more-info
        sort:
          - "state"
          - "name"
        filter:
          include:
            - name: entity_id
              value: 'sensor.media_*_battery_state'

      # Motion Sensors
      - type: 'custom:battery-state-card'
        title: 'Motion Sensors'
        <<: *battery-state-color_gradient
        <<: *battery-state-style
        tap_action: more-info
        sort:
          - "state"
          - "name"
        filter:
          include:
            - name: entity_id
              value: 'sensor.snr_*motion_battery'

      # Plant Sensors
      - type: 'custom:battery-state-card'
        title: 'Plant Sensors'
        <<: *battery-state-color_gradient
        <<: *battery-state-style
        tap_action: more-info
        sort:
          - "state"
          - "name"
        filter:
          include:
            - name: entity_id
              value: 'sensor.snr_*plant_*_battery'

      # Propane Tank Sensors
      - type: 'custom:battery-state-card'
        title: 'Propane Sensors'
        <<: *battery-state-color_gradient
        <<: *battery-state-style
        tap_action: more-info
        sort:
          - "state"
          - "name"
        filter:
          include:
            - name: entity_id
              value: 'sensor.snr_*_propane_battery_persistent'

      # Remote Controls
      - type: 'custom:battery-state-card'
        title: 'Remotes'
        <<: *battery-state-color_gradient
        <<: *battery-state-style
        tap_action: more-info
        sort:
          - "state"
          - "name"
        filter:
          include:
            - name: entity_id
              value: 'sensor.rmt_*remote_battery'

      # Scale Sensors
      - type: 'custom:battery-state-card'
        title: 'Scale'
        <<: *battery-state-color_gradient
        <<: *battery-state-style
        tap_action: more-info
        sort:
          - "state"
          - "name"
        filter:
          include:
            - name: entity_id
              value: 'sensor.scale_*_battery_persistent'

      # Toothbrushes
      - type: 'custom:battery-state-card'
        title: 'Toothbrushes'
        <<: *battery-state-color_gradient
        <<: *battery-state-style
        tap_action: more-info
        sort:
          - "state"
          - "name"
        filter:
          include:
            - name: entity_id
              value: 'sensor.toothbrush_*_battery_persistent'

      # Vibration Sensors
      - type: 'custom:battery-state-card'
        title: 'Vibration Sensors'
        <<: *battery-state-color_gradient
        <<: *battery-state-style
        tap_action: more-info
        sort:
          - "state"
          - "name"
        filter:
          include:
            - name: entity_id
              value: 'sensor.snr_*vibration_battery'

